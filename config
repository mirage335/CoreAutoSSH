#-----BEGIN---------------------------------------#default

##############################
#####gateways
##############################
#####Host default-gw			#####
Match host default-gw exec "~/.ssh/default/cautossh _match-default-gw_at_primary"
	HostName example1.com
	Port 22
	UserKnownHostsFile ~/.ssh/default/known_hosts
	User user

Match host default-gw exec "~/.ssh/default/cautossh _match-default-gw_at_secondary"
	HostName example2.com
	Port 22
	UserKnownHostsFile ~/.ssh/default/known_hosts
	User user

Host default-gw
	PubkeyAuthentication yes
	PasswordAuthentication no
	IdentityFile ~/.ssh/default/id_rsa

##############################
#####clients
##############################
Match host defaultbeta exec "nmap -Pn beta.lan -p 22 2> /dev/null | grep open > /dev/null 2>&1"
	HostName beta.lan

Match host defaultbeta exec "nmap -Pn dc_wifi.lan -p 22 2> /dev/null | grep open > /dev/null 2>&1"
	HostName beta_wifi.lan

Match host defaultbeta exec "nmap -Pn beta.example.com -p 22 2> /dev/null | grep open > /dev/null 2>&1"
	HostName beta.example.com

Match host defaultbeta exec "~/.ssh/default/cautossh _match-default-gw_at_primary"
	HostName localhost
	Port 20001
	ProxyCommand ssh -F ~/.ssh/default/config -q -W %h:%p default-gw

Match host defaultalpha exec "nmap -Pn alpha.lan -p 22 2> /dev/null | grep open > /dev/null 2>&1"
	HostName alpha.lan

Match host defaultalpha exec "nmap -Pn alpha.example.com -p 22 2> /dev/null | grep open > /dev/null 2>&1"
	HostName alpha.example.com

Match host defaultalpha exec "~/.ssh/default/cautossh _match-default-gw_at_primary"
	HostName localhost
	Port 20000
	ProxyCommand ssh -F ~/.ssh/default/config -q -W %h:%p default-gw

Host default*
	Compression yes
	ExitOnForwardFailure yes
	ConnectTimeout 2
	ConnectionAttempts 1
	ServerAliveInterval 5
	ServerAliveCountMax 5
	#PubkeyAuthentication yes
	#PasswordAuthentication no
	StrictHostKeyChecking no
	UserKnownHostsFile ~/.ssh/default/known_hosts

Host default*
	IdentityFile ~/.ssh/default/id_rsa
	

#-----END-----
